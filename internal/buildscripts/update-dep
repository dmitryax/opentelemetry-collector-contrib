#!/bin/sh

# Updates MODULE inside go.mod if it is already present to version VERSION.

set -e

if grep "$MODULE " go.mod | grep -Fvq "// indirect"; then
  go get "$MODULE"@"$VERSION"
fi

# If MODULE is "go.opentelemetry.io/collector" need to update "go.opentelemetry.io/collector/model" as well.
if [ "$MODULE" == "go.opentelemetry.io/collector" ]; then
  MODEL=$MODULE"/model"
  if grep "$MODEL " go.mod | grep -Fvq "// indirect"; then
    go get "$MODEL"@"$VERSION"
  fi
fi
